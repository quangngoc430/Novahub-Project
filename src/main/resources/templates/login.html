<!DOCTYPE html>
<html>
<head>
	<title>Login</title>
</head>
<body>
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

	<div class="row">

		<div class="col-3"></div>
		<div class="col-6">
			<a href="https://accounts.google.com/o/oauth2/auth?scope=email&redirect_uri=http://localhost:8080/login-google&response_type=code
			&client_id=1030526901378-0e0pnivs7jnmma5bkfg8n87ps1qk1ntj.apps.googleusercontent.com&approval_prompt=force">Login With Gmail</a>
		</div>
		<div class="col-3"></div>
	</div>


	<div class="row">

		<div class="col-3"></div>
		<form class="col-6 border border-primary rounded" style="padding: 10px;" action="javascript:void(0);">
			<div>
				<label class="form-control" id="message" hidden="true"></label>
			</div>	
			<div class="form-group row ">
				<label  class="col-sm-4 col-form-label">Email address</label>
				<div class="col-sm-8">
					<input type="text" class="form-control" name="username" id="email" placeholder="Enter email"/>
				</div>
			</div>
			<div class="form-group row">
				<label  class="col-sm-4 col-form-label">Password</label>
				<div class="col-sm-8">
					<input type="password" class="form-control" name="password" id="password" placeholder="Enter password"/>
				</div>
			</div>
			<input id="btn-login" class="btn btn-primary float-right" type="submit" value="Submit"/>
		</form>
		<div class="col-3"></div>
	</div>

	<script type="text/javascript">
        var dataSaved;

        $("#btn-login").click( function(){
            var data = JSON.stringify({
				"email" : $("#email").val(),
				"password" : $("#password").val()
			});


            $.ajax({
                type: "POST",
                contentType: "application/json",
                url: "/api/login",
                dataType: "json",
				data: data,
                timeout: 10000,
                success: function (dataReceive){
                    console.log(dataReceive);
                    dataSaved = dataReceive;

                    if(dataReceive.role.name == "ADMIN")
                    	window.location.replace("/admin");
                    else if (dataReceive.role.name == "USER")
                    	window.location.replace("/user");
                    else 
                    	window.location.replace("/clerk");
                },
                error: function (error) {
                    console.log(error);
                }
            });
        });
	</script>
</body>
</html>